apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "axiom-engine.fullname" . }}-config
  labels:
    {{- include "axiom-engine.labels" . | nindent 4 }}
data:
  PORT: {{ .Values.config.port | quote }}
  DURABILITY_MODE: {{ .Values.config.durabilityMode | quote }}
  CLUSTER_STRATEGY: {{ .Values.config.clusterStrategy | quote }}
  CLUSTER_KUBERNETES_SELECTOR: "app.kubernetes.io/name={{ include "axiom-engine.name" . }}"
  CLUSTER_KUBERNETES_BASENAME: {{ include "axiom-engine.name" . | quote }}
  RATE_LIMIT_BACKEND: {{ .Values.config.rateLimitBackend | quote }}
  RATE_LIMIT_REQUESTS_PER_MINUTE: {{ .Values.config.rateLimitRequestsPerMinute | quote }}
  GRAPHQL_COMPLEXITY_LIMIT: {{ .Values.config.graphqlComplexityLimit | quote }}
  WAL_DATA_DIR: {{ .Values.config.walDataDir | quote }}
  WAL_SEGMENT_SIZE_MB: {{ .Values.config.walSegmentSizeMb | quote }}
  LOG_LEVEL: {{ .Values.config.logLevel | quote }}
  RELEASE_DISTRIBUTION: "name"
